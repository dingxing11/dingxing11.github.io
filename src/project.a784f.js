window.__require=function t(e,n,i){function c(a,s){if(!n[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var r="function"==typeof __require&&__require;if(!s&&r)return r(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+a+"'")}}var g=n[a]={exports:{}};e[a][0].call(g.exports,function(t){return c(e[a][1][t]||t)},g,g.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<i.length;a++)c(i[a]);return c}({Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"ad922DZAu1LqYYgPkxxfk1k","Enemy");var i=t("WuGong");e.exports={Name:"\u72fc\u4eba",ack:20,def:3,HP:120,MAXHP:120,MP:120,MAXMP:120,EXP:20,ackNum:[],BeiBao:[i[0],{name:"\u6253\u795e\u77f3",decribe:"\u4e00\u9897\u4f1a\u8bf4\u8bdd\u7684\u77f3\u5934",pingzhi:"\u4e01",wugongtype:"\u88ab\u52a8",Type:"\u7269\u54c1",gongneng:"\u589e\u76ca\u7c7b",power:0,num:1,drop:30},i[1]]},cc._RF.pop()},{WuGong:"WuGong"}],Global:[function(t,e,n){"use strict";cc._RF.push(e,"25df6Y5rfpBCqjfOKpf4PS+","Global");var i=t("WuGong");window.Global={wugong_list:{title:"",zhuangbei:{part:""}},player:{saved:!1},boss:{dead:!1},baoxiang:{opened:!1},sceneName:"",shangcheng_first:!1,goScene:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?(this.sceneName=t,cc.director.loadScene("load")):cc.director.loadScene(t)}},window.getWG=function(t){return i.forEach(function(e){if(e.name==t)return e}),null},cc._RF.pop()},{WuGong:"WuGong"}],Person:[function(t,e,n){"use strict";cc._RF.push(e,"c0ff1mG2qFPQpLgNalQ5FqM","Person"),cc.Class({extends:cc.Component,properties:{Name:"\u4e01\u65b0",ack:10,def:3,HP:100,MAXHP:100,MP:100,MAXMP:100,JN:[],EXP:10,MAXEXP:100,LEVEL:1},start:function(){}}),cc._RF.pop()},{}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"7ce0c/Eh7lB/oNGr2F0xtrf","Player"),e.exports={Name:"\u4e01\u65b0",money:2e4,ack:20,def:3,HP:100,MAXHP:100,MP:100,MAXMP:100,JN:[],WUGONG:[],WUQI:null,HUSHOU:null,YAODAI:null,XIEZI:null,EXP:10,MAXEXP:100,LEVEL:1,BeiBao:[],isMap:!1,xPosition:0,yPosition:0},cc._RF.pop()},{}],ShangCheng:[function(t,e,n){"use strict";cc._RF.push(e,"5b9c0TUKSpOVLYQQ2eFeyBX","ShangCheng"),e.exports={wugong:[],zhuangbei:[],startTime:0,endTime:0,time:72e5},cc._RF.pop()},{}],WuGong:[function(t,e,n){"use strict";cc._RF.push(e,"73fa9638IJNrr+UEZiTzzAn","WuGong"),e.exports=[{name:"\u5de6\u53f3\u4e92\u640f",describe:"30%\u7684\u6982\u7387\u653b\u51fb\u653b\u51fb\u4e24\u6b21",wugongtype:"\u88ab\u52a8",Type:"\u6b66\u529f",pingzhi:"\u7532",gongneng:"\u89e6\u53d1\u7c7b",power:0,jl:30,ackNum:2,NOW_CD:0,CD:0,drop:100,num:1,icon:"wugong/JA001_1",show:"wugong/JA001_2",money:1e3,action:function(t,e,n,i){var c=this,o=Math.floor(100*Math.random());if(o>=this.jl||o<0)return cc.log("\u6ca1\u6709\u8fdb\u5165\u5de6\u53f3\u4e92\u640f!"+o),!1;cc.log("\u8fdb\u5165\u5de6\u53f3\u4e92\u640f"+o);var a=cc.find("Canvas/player1"),s=1;t.player1=a;var l=cc.find("Canvas/enemy1"),r=cc.find("Canvas/dhk/scroll"),g=cc.find("Canvas/dhk/scroll/view/content/item"),u=cc.moveTo(.5,l.getPosition().x-100,l.getPosition().y),m=cc.moveTo(.5,a.getPosition()),h=r.getComponent(cc.ScrollView),d=g.getComponent(cc.Label),p=a.getComponent(cc.Animation);t.liu.getComponent(cc.Animation).active=!0;var f;f=Math.round((Math.random()+1)*(i.ack-n.def)),!(n.HP-f<=0)&&s<2&&(s=2);var v=cc.sequence(cc.callFunc(function(){cc.log("repeat num1:"+s),cc.log("\u5f00\u59cb\u653b\u51fb\u654c\u4eba")}),u,cc.callFunc(function(){p.getAnimationState("player_ack");t.liu.active=!1,p.play("player_ack")}),cc.callFunc(function(){n.HP=n.HP-f>0?n.HP-f:0,d.string+=i.Name+"\u4f7f\u7528"+c.name+"\u5bf9"+n.Name+"\u9020\u6210\u4e86"+f+"\u70b9\u4f24\u5bb3\n",cc.log("repeat num2:"+s),n.HP<=0&&t.enemy1Dead(),h.scrollToBottom(.1)}),cc.spawn(cc.callFunc(function(){t.enemyAttacked(),t.drop(f)}),cc.delayTime(1)),m);return t.repeat=a.runAction(cc.sequence(cc.repeat(v,s),cc.callFunc(function(){e()}))),!0}},{name:"\u516d\u8109\u795e\u5251",Type:"\u6b66\u529f",pingzhi:"\u4e59",describe:"\u51fa\u81ea\u5927\u7406\u6bb5\u6c0f,\u5f3a\u529b\u7684\u653b\u51fb\u62db\u5f0f",wugongtype:"\u4e3b\u52a8",gongneng:"\u653b\u51fb\u7c7b",power:3,MAXCD:3,NOW_CD:0,CD:2,drop:30,num:1,money:2e3,icon:"wugong/ID070_1",show:"wugong/ID070_2",action:function(t,e,n,i){var c=this,o=cc.find("Canvas/player1");t.player1=o;var a=cc.find("Canvas/enemy1"),s=cc.find("Canvas/dhk/scroll"),l=cc.find("Canvas/dhk/scroll/view/content/item"),r=cc.moveTo(.5,a.getPosition().x-100,a.getPosition().y),g=cc.moveTo(.5,t.liu.getPosition()),u=s.getComponent(cc.ScrollView),m=l.getComponent(cc.Label),h=o.getComponent(cc.Animation);t.liu.getComponent(cc.Animation);t.liu.active=!0,t.liu.opacity=255;var d=0,p=cc.sequence(cc.callFunc(function(){cc.log("\u5f00\u59cb\u653b\u51fb\u654c\u4eba")}),cc.callFunc(function(){h.play("player_ack")}),r,cc.callFunc(function(){t.liu.opacity=0}),cc.callFunc(function(){d=Math.round((Math.random()+1)*(i.ack*c.power-n.def)),n.HP=n.HP-d>0?n.HP-d:0,m.string+=i.Name+"\u4f7f\u7528"+c.name+"\u5bf9"+n.Name+"\u9020\u6210\u4e86"+d+"\u70b9\u4f24\u5bb3\n",n.HP<=0&&t.enemy1Dead(),u.scrollToBottom(.1)}),cc.spawn(cc.callFunc(function(){t.enemyAttacked(),t.drop(d)}),cc.delayTime(0)),g,cc.callFunc(function(){t.liu.active=!1}));return t.repeat=t.liu.runAction(cc.sequence(cc.repeat(p,1),cc.callFunc(function(){e()}))),!0}}],cc._RF.pop()},{}],ZhuangBei:[function(t,e,n){"use strict";cc._RF.push(e,"feebcpOCkdH/6uL0Ksw0V/0","ZhuangBei"),e.exports=[{name:"\u9f99\u6cc9\u5251",money:200,ack:20,def:0,HP:0,pingzhi:"\u4e19",describe:"\u9f99\u6cc9\u5251\uff0c\u53c8\u540d\u9f99\u6e0a\u5251\uff0c\u59cb\u4e8e\u6625\u79cb\u6218\u56fd\u65f6\u671f\uff0c\u8ddd\u4eca\u6709\u4e8c\u5343\u516d\u767e\u591a\u5e74\uff0c\u662f\u4e2d\u56fd\u53e4\u4ee3\u540d\u5251\uff0c\u8bda\u4fe1\u9ad8\u6d01\u4e4b\u5251\u3002\u4f20\u8bf4\u662f\u7531\u6b27\u51b6\u5b50\u548c\u5e72\u5c06\u4e24\u5927\u5251\u5e08\u8054\u624b\u6240\u94f8\u3002",icon:"zhuangbei/WD005_1",show:"zhuangbei/WD005_2",Type:"\u88c5\u5907",Part:"\u6b66\u5668"},{name:"\u6e0a\u8679",money:5e3,ack:1200,def:0,HP:0,pingzhi:"\u7532",describe:"\u98ce\u80e1\u5b50\u5251\u8c31\u201c\u5341\u5927\u540d\u5251\u201d\u6392\u540d\u7b2c\u4e8c\u3002",icon:"zhuangbei/WD008_1",show:"zhuangbei/WD008_2",Type:"\u88c5\u5907",Part:"\u6b66\u5668"},{name:"\u968f\u4fbf",money:100,HP:0,ack:110,def:0,pingzhi:"\u4e01",describe:"\u968f\u4fbf\u7684\u4eba\u8d77\u7684\u4e00\u4e2a\u968f\u4fbf\u7684\u540d\u5b57",icon:"zhuangbei/WD008_1",show:"zhuangbei/WD008_2",Type:"\u88c5\u5907",Part:"\u6b66\u5668"},{name:"\u795e\u884c\u978b",money:5e3,HP:0,ack:0,def:10,pingzhi:"\u7532",describe:"\u65e5\u884c\u5343\u91cc",icon:"zhuangbei/WD008_1",show:"zhuangbei/WD008_2",Type:"\u88c5\u5907",Part:"\u978b\u5b50"},{name:"\u78a7\u7389\u8170\u5e26",money:5e3,ack:0,HP:100,def:5,pingzhi:"\u7532",describe:"\u7531\u7fe1\u7fe0\u5236\u4f5c\u7684\u8170\u5e26",icon:"zhuangbei/WD008_1",show:"zhuangbei/WD008_2",Type:"\u88c5\u5907",Part:"\u8170\u5e26"}],cc._RF.pop()},{}],appstart:[function(t,e,n){"use strict";cc._RF.push(e,"0685blFfPhP74HHQWCT0gJA","appstart");var i=t("Player");cc.Class({extends:cc.Component,properties:{UserName:{default:null,type:cc.EditBox},LabelName:{default:null,type:cc.Label},LoginName:{default:null,type:cc.Label},restart:{default:null,type:cc.Node}},onLoad:function(){cc.log("Time:"),this._splash=this.node.getChildByName("splash")},newGame:function(){cc.sys.localStorage.removeItem("player"),cc.game.end()},loginUser:function(){if(cc.sys.localStorage.getItem("player")){cc.log("\u8fdb\u6765\u4e86"),cc.log(JSON.stringify(cc.sys.localStorage)),this.restart.active=!0,this.UserName.node.active=!1,this.LabelName.node.active=!1,this.LoginName.string="\u7ee7\u7eed\u6e38\u620f";var t=JSON.parse(cc.sys.localStorage.getItem("player"));for(var e in t)i[e]=t[e]}else this.restart.active=!1;cc.log("\u83b7\u53d6\u5230\u7684\u7528\u6237\u4fe1\u606f:%s",JSON.stringify(i))},start:function(){var t=this;this._splash=this.node.getChildByName("splash");this._splash.active=!0;var e=Date.now();this.loginUser(),setTimeout(function n(){Date.now()-e>=3e3?t._splash.runAction(cc.fadeOut(.5),cc.callFunc(function(){t._splash.active=!1})):setTimeout(n,33)},33)}}),cc._RF.pop()},{Player:"Player"}],beibao:[function(t,e,n){"use strict";cc._RF.push(e,"b8248xoXMBPxrJvYqvI7e1v","beibao");var i=t("Player");cc.Class({extends:cc.Component,properties:{title:"",item:"",Ntitle:{default:null,type:cc.Prefab},Nname:{default:null,type:cc.Prefab},Ntab:{default:null,type:cc.Node},Ncontent:{default:null,type:cc.Node},Nshuoming:{default:null,type:cc.Node}},onLoad:function(){var t=this;this.Ntab=cc.find("Canvas/main/node/beibao/tab"),this.Ncontent=cc.find("Canvas/main/node/beibao/name/view/content"),this.Nshuoming=cc.find("Canvas/main/node/beibao/shuoming"),this.node.on("select-tab",function(e){t.title=e.getUserData(),t.clearItems(),t.selectTitle(t.title)},this),this.node.on("select-item",function(e){t.item=e.getUserData(),t.selectItem(t.item)},this)},start:function(){},onEnable:function(){var t=this;this.clearTitles(),this.clearItems();var e=new Set;e.add("\u5168\u90e8"),i.BeiBao.forEach(function(t){e.add(t.Type)});var n=new Array;e.forEach(function(e){var i=cc.instantiate(t.Ntitle);i.getChildByName("tabitem").getComponent(cc.Label).string=e,n.push(e),t.Ntab.addChild(i)}),this.title=n[0],this.selectTitle(this.title)},clearTitles:function(){this.Ntab.children.forEach(function(t){t.destroy()})},clearItems:function(){this.Ncontent.children.forEach(function(t){t.destroy()})},selectTitle:function(t){var e=this,n=new Array;i.BeiBao.forEach(function(i){if(i.Type===t||"\u5168\u90e8"===t){var c=cc.instantiate(e.Nname),o=c.getComponent(cc.Label);o.string=i.name,n.push(o.string),e.Ncontent.addChild(c)}}),this.item=n[0],this.selectItem(this.item)},selectItem:function(t){var e=this;i.BeiBao.forEach(function(n){if(n.name===t){var i=e.Nshuoming.getChildByName("title"),c=e.Nshuoming.getChildByName("num"),o=e.Nshuoming.getChildByName("body").getChildByName("details"),a=i.getComponent(cc.Label),s=o.getComponent(cc.Label),l=c.getComponent(cc.Label);a.string="\u540d\u79f0:"+n.name,s.string="\u54c1\u8d28:"+n.pingzhi+"\n",s.string+="=======================\n",s.string+=n.describe,l.string="\u6570\u91cf:"+n.num}})},useItme:function(){var t=this;i.BeiBao.forEach(function(e,n){if(e.name===t.item){cc.log(e.num);var c=!0;if(i.WUGONG.forEach(function(t){e.name===t.name&&(cc.log("\u5df2\u7ecf\u5b66\u4f1a\u8be5\u6b66\u529f"),c=!1),cc.log(t.name)}),c){i.WUGONG.push(e);var o=t.Nshuoming.getChildByName("title"),a=t.Nshuoming.getChildByName("num"),s=t.Nshuoming.getChildByName("body").getChildByName("details"),l=o.getComponent(cc.Label),r=s.getComponent(cc.Label),g=a.getComponent(cc.Label);if(e.num>1)e.num=parseInt(e.num)-1,g.string="\u6570\u91cf:"+e.num;else cc.log("\u6570\u91cf\u662f1\u9500\u6bc1"),i.BeiBao.splice(n,1),l.string="\u540d\u79f0:",r.string="",g.string="\u6570\u91cf:",t.Ncontent.children.forEach(function(t){var n=t.getComponent(cc.Label);cc.log(n.string+"11"),cc.log(e.name+"12"),n.string==e.name&&(cc.log("destroy"),t.destroy())})}}})}}),cc._RF.pop()},{Player:"Player"}],btn_ack:[function(t,e,n){"use strict";cc._RF.push(e,"e95d6Sqr4hJPaCwdlXwOR7r","btn_ack");var i=t("Player"),c=t("Enemy"),o=t("WuGong");cc.Class({extends:cc.Component,properties:{repeat:"",player1:"",dropHP:{default:null,type:cc.Prefab,displayName:"\u6389\u8840\u91cf"},sum:0,liu:"",chufa:[]},onLoad:function(){this.sum=1;var t=new cc.Component.EventHandler;t.target=this.node,t.component="btn_ack",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t),this.liu=cc.find("Canvas/liu");this.liu.getComponent(cc.Animation);this.liu.active=!1,cc.find("Canvas/player1/playerbg").z=-1},btnClick1:function(t,e){var n=this,o=cc.find("Canvas/huihe"),a=cc.find("Canvas/dhk/scroll/view/content/item").getComponent(cc.Label);o.getComponent(cc.Label).string=""+this.sum,this.node.getComponent(cc.Button).interactable=!1,this.ackEnemy().then(function(){return n.Attacked()}).then(function(){if(i.HP<=0||c.HP<=0){if(c.HP<=0){var t=[];for(i.EXP+=c.EXP,c.BeiBao.forEach(function(e){if(console.log(e),Math.floor(100*Math.random())<=e.drop){var n=!1,c={};i.BeiBao.forEach(function(t){t.name===e.name&&(n=!0,t.num+=1)}),n||i.BeiBao.push(e),cc.log("\u83b7\u5f97\u4e861\u4e2a"+e.name),a.string+="\u83b7\u5f97\u4e861\u4e2a"+e.name+"\n",c.name=e.name,c.num=1,t.push(c)}});i.EXP>=i.MAXEXP;)i.EXP=i.EXP-i.MAXEXP,i.MAXHP+=Math.round(20*Math.random()+1),i.MAXMP+=Math.round(20*Math.random()+1),i.ack+=Math.round(10*Math.random()+1),i.def+=Math.round(5*Math.random()+1),i.LEVEL+=1,i.MAXEXP+=100;n.vectory(t)}else n.vectory(drops);return c.HP=c.MAXHP,i.HP=i.MAXHP,i.MP=i.MAXMP,cc.sys.localStorage.setItem("player",JSON.stringify(i)),i.JN.forEach(function(t){t.NOW_CD=0}),cc.log("\u56de\u5408\u7ed3\u675f!"),Promise.reject()}return n.ackPlayer()}).then(function(){if(n.node.getComponent(cc.Button).interactable=!0,i.HP<=0||c.HP<=0){if(c.HP<=0){for(n.player1.stopAction(n.repeat),i.EXP+=c.EXP;i.EXP>=i.MAXEXP;)i.EXP=i.EXP-i.MAXEXP,i.MAXHP+=Math.round(20*Math.random()+1),i.MAXMP+=Math.round(20*Math.random()+1),i.ack+=Math.round(10*Math.random()+1),i.def+=Math.round(5*Math.random()+1),i.LEVEL+=1,i.MAXEXP+=100;n.vectory()}else n.vectory();c.HP=c.MAXHP,i.HP=i.MAXHP,i.MP=i.MAXMP,cc.log("\u5931\u8d25\uff0c\u56de\u5408\u7ed3\u675f!")}else n.sum=parseInt(n.sum)+1,n.btnClick1()})},ackEnemy:function(){var t=this;return new Promise(function(e,n){var a=!1;i.JN.length>0&&i.JN.forEach(function(n){cc.log("\u8fdb\u6765\u6b66\u529f\u4e86"+n.NOW_CD),0==n.NOW_CD?a||(o.forEach(function(t){t.name==n.name&&(n.action=t.action)}),(a=n.action(t,e,c,i))&&(n.NOW_CD=n.CD)):n.NOW_CD-=1}),a||t.pugong(e)})},enemyAttacked:function(){var t=this;return new Promise(function(e,n){cc.find("Canvas/enemy1").runAction(cc.sequence(t.Attacked(),cc.callFunc(e)))})},playerAttacked:function(){return new Promise(function(t,e){cc.find("Canvas/player1").runAction(cc.sequence(cc.moveBy(.25,-15,0),cc.moveBy(.25,15,0),cc.moveBy(.25,15,0),cc.moveBy(.25,-15,0),cc.callFunc(t)))})},vectory:function(t){cc.log("\u80dc\u5229\u4e86\u6389\u843d\u7269\u54c1:%s",t);var e=cc.find("Canvas/end");e.getComponent("end").drops=t,e.active=!0},Attacked:function(){return cc.sequence(cc.moveBy(.25,20,0),cc.moveBy(.25,-20,0),cc.moveBy(.25,-20,0),cc.moveBy(.25,20,0))},drop:function(t){var e=cc.find("Canvas/enemy1"),n=cc.instantiate(this.dropHP);n.getComponent(cc.Label).string="-"+t,n.parent=e,n.setPosition(0,50);var i=cc.spawn(cc.moveBy(1,0,30),cc.fadeOut(1));n.runAction(i)},playerDrop:function(t){var e=cc.find("Canvas/player1"),n=cc.instantiate(this.dropHP);n.getComponent(cc.Label).string="-"+t,n.parent=e,n.setPosition(0,50);var i=cc.spawn(cc.moveBy(1,0,30),cc.fadeOut(1));n.runAction(i)},ackPlayer:function(){var t=this;return new Promise(function(e,n){var o=cc.find("Canvas/player1"),a=cc.find("Canvas/enemy1"),s=cc.find("Canvas/dhk/scroll"),l=cc.find("Canvas/dhk/scroll/view/content/item"),r=cc.moveTo(.5,o.getPosition().x+100,a.getPosition().y),g=cc.moveTo(.5,a.getPosition()),u=s.getComponent(cc.ScrollView),m=l.getComponent(cc.Label);cc.log("\u654c\u4ebaX\u5750\u6807"+a.getPosition().x),a.runAction(cc.sequence(cc.callFunc(function(){cc.log("\u5f00\u59cb\u88ab\u653b\u51fb")}),r,cc.callFunc(function(){i.HP=i.HP-(c.ack-i.def)>0?i.HP-(c.ack-i.def):0,m.string+=i.Name+"\u53d7\u5230\u4e86"+(c.ack-i.def)+"\u70b9\u4f24\u5bb3\n",u.scrollToBottom(.1)}),cc.spawn(cc.callFunc(function(){t.playerAttacked(),t.playerDrop(c.ack-i.def)}),cc.delayTime(1)),g,cc.callFunc(e)))})},start:function(){var t=this;i.WUGONG.forEach(function(e){if(e.NOW_CD=0,cc.log(e.wugongtype),cc.log(e.gongneng),"\u88ab\u52a8"===e.wugongtype){if("\u589e\u76ca\u7c7b"===e.gongneng)for(var n in e)i[n]=parseInt(i[n])+parseInt(e[n]);if("\u89e6\u53d1\u7c7b"===e.gongneng){var c={ackNum:e.ackNum,jl:e.jl};t.chufa.push(c),cc.log("\u5b58\u4e86\u5de6\u53f3"),cc.log(t.chufa)}}}),this.btnClick1()},enemy1Dead:function(){cc.find("Canvas/enemy1").runAction(cc.fadeOut(1))},player1Dead:function(){cc.find("Canvas/player1").runAction(cc.fadeOut(1))},pugong:function(t){var e=this,n=cc.find("Canvas/player1");this.player1=n;var o=cc.find("Canvas/enemy1"),a=cc.find("Canvas/dhk/scroll"),s=cc.find("Canvas/dhk/scroll/view/content/item"),l=cc.moveTo(.5,o.getPosition().x-100,o.getPosition().y),r=cc.moveTo(.5,n.getPosition()),g=a.getComponent(cc.ScrollView),u=s.getComponent(cc.Label),m=n.getComponent(cc.Animation);this.liu.getComponent(cc.Animation).active=!0;var h=0,d=cc.sequence(cc.callFunc(function(){cc.log("\u5f00\u59cb\u653b\u51fb\u654c\u4eba")}),l,cc.callFunc(function(){m.getAnimationState("player_ack");e.liu.active=!1,m.play("player_ack")}),cc.callFunc(function(){null==i.WUQI?(h=Math.round((Math.random()+1)*(i.ack-c.def)),cc.log("\u6ca1\u6709\u88c5\u5907\u6b66\u5668")):(h=Math.round((Math.random()+1)*(i.ack+i.WUQI.ack-c.def)),cc.log("\u88c5\u5907\u6b66\u5668")),c.HP=c.HP-h>0?c.HP-h:0,u.string+=i.Name+"\u4f7f\u7528\u666e\u653b\u5bf9"+c.Name+"\u9020\u6210\u4e86"+h+"\u70b9\u4f24\u5bb3\n",c.HP<=0&&e.enemy1Dead(),g.scrollToBottom(.1)}),cc.spawn(cc.callFunc(function(){e.enemyAttacked(),e.drop(h)}),cc.delayTime(1)),r);this.repeat=n.runAction(cc.sequence(cc.repeat(d,1),cc.callFunc(function(){t()})))},localConvertWorldPointAR:function(t){return t?t.convertToWorldSpaceAR(cc.v2(0,0)):null},getWuGong:function(){return o[Math.floor(Math.random()*o.length)]},update:function(t){}}),cc._RF.pop()},{Enemy:"Enemy",Player:"Player",WuGong:"WuGong"}],btn_bb:[function(t,e,n){"use strict";cc._RF.push(e,"5b8ffjvYF5KjZXX1p0x2pUT","btn_bb"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="btn_bb",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t)},btnClick1:function(t,e){var n=cc.find("Canvas/main/node"),i=cc.find("Canvas/main/node/beibao"),c=cc.find("Canvas/main/dhk/scroll/view/content/item"),o=cc.find("Canvas/main/dhk/scroll");cc.find("Canvas/main/dhk/scroll/view/content");if(n){var a=cc.moveTo(0,-i.getPosition().x,0),s=c.getComponent(cc.Label),l=o.getComponent(cc.ScrollView);s.string+="\u80cc\u5305\n",n.runAction(a),l.scrollToBottom(.1)}},start:function(){}}),cc._RF.pop()},{}],btn_df:[function(t,e,n){"use strict";cc._RF.push(e,"7f3f2VD9ZpJ4Js6EQSUvwtM","btn_df"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="btn_df",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t)},btnClick1:function(t,e){var n=cc.find("Canvas/main/node"),i=cc.find("Canvas/main/node/btn_list"),c=cc.find("Canvas/main/dhk/scroll/view/content/item"),o=cc.find("Canvas/main/dhk/scroll");cc.find("Canvas/main/dhk/scroll/view/content");if(n){var a=cc.moveTo(0,-i.getPosition().x,0),s=c.getComponent(cc.Label),l=o.getComponent(cc.ScrollView);s.string+="\u5411\u53f3\u79fb\u52a8\u4e86\n",n.runAction(a),l.scrollToBottom(.1)}},start:function(){}}),cc._RF.pop()},{}],btn_mj:[function(t,e,n){"use strict";cc._RF.push(e,"72b81N3lTxArZkDn8aFh674","btn_mj"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="btn_mj",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t)},btnClick1:function(t,e){cc.director.loadScene("mjmap")},start:function(){}}),cc._RF.pop()},{}],btn_rw:[function(t,e,n){"use strict";cc._RF.push(e,"c57dbLwrblPqav2/cAC1Zb6","btn_rw"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="btn_rw",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t)},btnClick1:function(t,e){var n=cc.find("Canvas/main/node"),i=cc.find("Canvas/main/node/list"),c=cc.find("Canvas/main/dhk/scroll/view/content/item"),o=cc.find("Canvas/main/dhk/scroll");if(n){var a=cc.moveTo(0,-i.getPosition().x,0),s=c.getComponent(cc.Label),l=o.getComponent(cc.ScrollView);s.string+="\u5411\u5de6\u79fb\u52a8\u4e86\n",n.runAction(a),l.scrollToBottom(.1)}},start:function(){}}),cc._RF.pop()},{}],btn_wg:[function(t,e,n){"use strict";cc._RF.push(e,"dfd4fFDOstFc55eRn1/ekeI","btn_wg"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="btn_wg",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t)},btnClick1:function(t,e){var n=cc.find("Canvas/main/node"),i=cc.find("Canvas/main/node/wugong"),c=cc.find("Canvas/main/dhk/scroll/view/content/item"),o=cc.find("Canvas/main/dhk/scroll");cc.find("Canvas/main/dhk/scroll/view/content");if(n){var a=cc.moveTo(0,-i.getPosition().x,0),s=c.getComponent(cc.Label),l=o.getComponent(cc.ScrollView);s.string+="\u6b66\u529f\n";var r=new cc.Event.EventCustom("select-tab",!0);r.setUserData("\u6b66\u529f"),i.dispatchEvent(r),n.runAction(a),l.scrollToBottom(.1)}},start:function(){}}),cc._RF.pop()},{}],end:[function(t,e,n){"use strict";cc._RF.push(e,"c391dLdt/RLp6ys0rNhtNfT","end"),cc.Class({extends:cc.Component,properties:{drop:{default:null,type:cc.Prefab},drops:[]},onLoad:function(){var t=this;cc.log("\u6389\u843d\u7684\u7269\u54c1:%s",this.drops),this.drops.forEach(function(e){var n=t.node.getChildByName("items"),i=cc.instantiate(t.drop);i.getComponent(cc.Label).string=e.name+"x"+e.num,n.addChild(i)})},btnClick1:function(t,e){Global.boss.dead=!0,Global.goScene("mjtiledmap"),cc.log("\u573a\u666f\u8df3\u8f6c\u4e86"),cc.find("Canvas/end").destroy()},start:function(){}}),cc._RF.pop()},{}],enemy1:[function(t,e,n){"use strict";cc._RF.push(e,"14178zfItdOSaWlN8qtcme2","enemy1");var i=t("Enemy");cc.Class({extends:cc.Component,properties:{HP:{default:null,type:cc.Label},HP_Pro:{default:null,type:cc.ProgressBar},Name:{default:null,type:cc.Label}},onLoad:function(){this.Name.string=i.Name},start:function(){},update:function(t){this.HP.string="\u8840\u91cf:"+i.HP,this.HP_Pro.progress=(i.HP/i.MAXHP).toFixed(1)}}),cc._RF.pop()},{Enemy:"Enemy"}],hp:[function(t,e,n){"use strict";cc._RF.push(e,"6e126G1k4pO956gWA+GVZNe","hp"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],items:[function(t,e,n){"use strict";cc._RF.push(e,"d8005u8o99AgLblW57jlV99","items"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="items",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t)},btnClick1:function(t,e){var n=cc.find("Canvas/main/node"),i=cc.find("Canvas/main/dhk/scroll/view/content/item"),c=this.node.getComponent(cc.Label),o=cc.find("Canvas/main/dhk/scroll");if(n){var a=i.getComponent(cc.Label),s=o.getComponent(cc.ScrollView);a.string+="\u70b9\u51fb\u4e86"+c.string+"\n";var l=new cc.Event.EventCustom("select-item",!0);l.setUserData(c.string),this.node.dispatchEvent(l),s.scrollToBottom(.1)}},start:function(){}}),cc._RF.pop()},{}],jishi:[function(t,e,n){"use strict";cc._RF.push(e,"7b3cfu92QJI8pAA91UbwD8Y","jishi");var i=t("Player"),c=t("WuGong"),o=t("ZhuangBei"),a=t("ShangCheng");cc.Class({extends:cc.Component,properties:{main:{default:null,type:cc.Node},money:{default:null,type:cc.Label},item1:{default:null,type:cc.Prefab},last_time:{default:null,type:cc.Label},select_title:"zhuangbei",interval:null},onLoad:function(){var t=this,e=this;this.items=this.node.getChildByName("items"),this.item_describe=this.node.getChildByName("item_describe"),this.item_name=this.item_describe.getChildByName("item_name"),this.describe=this.item_describe.getChildByName("describe"),this.shuoming=this.describe.getChildByName("shuoming");var n=this.item_name.getComponent(cc.Label),i=this.shuoming.getComponent(cc.Label);if(this.node.on("sh_select_item",function(c){t.select_node=c.target,e.item=e.getItemByName(c.getUserData()),cc.log(e.item),null==e.item?n.string=e.item.Name:n.string=e.item.name,i.string=e.item.describe,cc.loader.loadRes(e.item.show,cc.SpriteFrame,function(t,n){t&&cc.log(t),e.node.getChildByName("show").getComponent(cc.Sprite).spriteFrame=n})}),null==this.interval){e=this;this.interval=setInterval(function(){var n=new Date,i=a.time-(n.getTime()-a.startTime.getTime());if(i<0)return t.item_describe.active=!1,a.startTime=new Date,e.getItems(),e.clearItems(),"zhuangbei"==e.select_title&&e.initZhuangBei(),void("wugong"==e.select_title&&e.initShuJi());var c=i%864e5,o=Math.floor(c/36e5);o>=0&&o<10&&(o="0"+o);var s=c%36e5,l=Math.floor(s/6e4);l>=0&&l<10&&(l="0"+l);var r=s%6e4,g=Math.round(r/1e3);g>=0&&g<10&&(g="0"+g),cc.log(o+":"+l+":"+g),e.last_time.string="\u5237\u65b0\u65f6\u95f4: "+o+":"+l+":"+g},1e3)}},start:function(){0==a.startTime&&(a.startTime=new Date),this.money.string=i.money,0==Global.shangcheng_first&&(this.getItems(),Global.shangcheng_first=!0),this.select_title="zhuangbei",this.initZhuangBei()},getItems:function(){if(o.length<=10)a.zhuangbei=[],o.forEach(function(t){a.zhuangbei.push(t)});else for(var t=10,e=0;e<t;e++){var n=Math.floor(Math.random()*o.length);a.zhuangbei.push(o.splice(n,1)[0])}if(cc.log(o),c.length<=10)a.wugong=[],c.forEach(function(t){a.wugong.push(t)});else for(t=10,e=0;e<t;e++){n=Math.floor(Math.random()*c.length);a.wugong.push(c.splice(n,1)[0])}cc.log(c)},onEnable:function(){this.main.active=!1;var t=this;null==this.interval&&(this.interval=setInterval(function(){var e=new Date,n=a.time-(e.getTime()-a.startTime.getTime());n<=0&&(a.startTime=e,n=0,t.getItems(),"zhuangbei"==t.select_title&&t.initZhuangBei(),"wugong"==t.select_title&&t.initShuJi());var i=n%864e5,c=Math.floor(i/36e5);c>=0&&c<10&&(c="0"+c);var o=i%36e5,s=Math.floor(o/6e4);s>=0&&s<10&&(s="0"+s);var l=o%6e4,r=Math.round(l/1e3);r>=0&&r<10&&(r="0"+r),cc.log(c+":"+s+":"+r),t.last_time.string="\u5237\u65b0\u65f6\u95f4: "+c+":"+s+":"+r},1e3))},progressCallback:function(){},completeCallback:function(){},selectZhuangBei:function(){this.select_title="zhuangbei",this.initZhuangBei()},selectWuGong:function(){this.select_title="wugong",this.initShuJi()},initZhuangBei:function(){var t=this;this.clearItems(),a.zhuangbei.forEach(function(e){cc.loader.loadRes(e.icon,cc.SpriteFrame,function(n,i){n&&cc.log(n);var c=cc.instantiate(t.item1),o=c.getChildByName("label"),a=c.getChildByName("money").getChildByName("label_num"),s=(o=c.getChildByName("label"),c.getChildByName("icon_bian").getChildByName("icon")),l=o.getComponent(cc.Label),r=a.getComponent(cc.Label);s.getComponent(cc.Sprite).spriteFrame=i,l.string=e.name,r.string=e.money,c.parent=t.items,c.setPosition(0,0)})}),t.node.getChildByName("show").getComponent(cc.Sprite).spriteFrame=null},initShuJi:function(){var t=this;this.clearItems(),a.wugong.forEach(function(e){cc.loader.loadRes(e.icon,cc.SpriteFrame,function(n,i){n&&cc.log(n);var c=cc.instantiate(t.item1),o=c.getChildByName("label"),a=c.getChildByName("money").getChildByName("label_num"),s=(o=c.getChildByName("label"),c.getChildByName("icon_bian").getChildByName("icon")),l=o.getComponent(cc.Label),r=a.getComponent(cc.Label);s.getComponent(cc.Sprite).spriteFrame=i,l.string=e.name,r.string=e.money,c.parent=t.items,c.setPosition(0,0)})}),t.node.getChildByName("show").getComponent(cc.Sprite).spriteFrame=null},showDescribe:function(){this.item_describe.active=!0},getItemByName:function(t){var e=null;return o.forEach(function(n){n.name==t&&(e=n)}),e||c.forEach(function(n){n.name==t&&(e=n)}),e},describeCancel:function(){this.item_describe.active=!1},onDestroy:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)},onDisable:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)},describeOK:function(){var t=this;if(i.money-this.item.money<0)cc.log("\u5143\u5b9d\u4e0d\u591f\u4e86\uff01");else{if(i.money=i.money-this.item.money,this.money.string=i.money,cc.log(i.money),cc.log(this.select_node),this.select_node.destroy(),"zhuangbei"==this.select_title&&(a.zhuangbei.forEach(function(e){if(e.name==t.item.name){var n=a.zhuangbei.indexOf(e);a.zhuangbei.splice(n,1)}}),this.item.num=1,i.BeiBao.push(this.item)),"wugong"==this.select_title){var e=!1;a.wugong.forEach(function(e){if(e.name==t.item.name){var n=a.wugong.indexOf(e);a.wugong.splice(n,1)}}),i.BeiBao.forEach(function(n){n.name==t.item.name&&(n.num+=1,e=!0)}),e||(this.item.num=1,i.BeiBao.push(this.item))}t.node.getChildByName("show").getComponent(cc.Sprite).spriteFrame=null,cc.log(i.BeiBao),this.item_describe.active=!1}},clearItems:function(){this.items.children.forEach(function(t){t.destroy()})}}),cc._RF.pop()},{Player:"Player",ShangCheng:"ShangCheng",WuGong:"WuGong",ZhuangBei:"ZhuangBei"}],loading:[function(t,e,n){"use strict";cc._RF.push(e,"e1981cbzhFIQ5yHxljW4jH0","loading"),cc.Class({extends:cc.Component,properties:{_loading:!1,loadProgressBar:{default:null,type:cc.ProgressBar},progressTip:{default:null,type:cc.Label}},onLoad:function(){this.resource=null,this.loadProgressBar.progress=0,this._clearAll(),cc.director.preloadScene(Global.sceneName,this._progressCallback.bind(this),this._completeCallback.bind(this))},_clearAll:function(){},_progressCallback:function(t,e,n){cc.log(t+e),this.progress=t/e,this.resource=n,cc.log("\u6b63\u5728\u52a0\u8f7d"),cc.log(this.resource.id),this.completedCount=t,this.totalCount=e},_completeCallback:function(t,e){cc.log("\u52a0\u8f7d\u5b8c\u6210!")},start:function(){},update:function(t){if(this.resource){var e=this.loadProgressBar.progress;if(e>=1)this._loading||(this._loading=!0,cc.director.loadScene(Global.sceneName));else{e<this.progress&&((e+=t)>1&&(e=1),cc.log(e)),this.loadProgressBar.progress=e;var n=(100*e).toFixed(0)+"%";this.progressTip.string=n}}}}),cc._RF.pop()},{}],login:[function(t,e,n){"use strict";cc._RF.push(e,"0fc493RUblEdrsEJr2H81WA","login");var i=t("Player");cc.Class({extends:cc.Component,properties:{UserName:{default:null,type:cc.EditBox},LabelName:{default:null,type:cc.Label}},onLoad:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="login",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t)},btnClick1:function(t,e){1==this.UserName.node.active&&(i.Name=this.UserName.string),Global.goScene("main")},randomName:function(t){var e=["\u6b27\u9633","\u4e01","\u4e54","\u8bf8\u845b"];this.UserName.string=e[Math.floor(Math.random()*e.length)]+["\u65b0","\u6653\u6885","\u4eae","\u5cf0"][Math.floor(Math.random()*e.length)]},start:function(){}}),cc._RF.pop()},{Player:"Player"}],main:[function(t,e,n){"use strict";cc._RF.push(e,"99355srhQZI5b17czg+/EFV","main");var i=t("Player");cc.Class({extends:cc.Component,properties:{jishi:{default:null,type:cc.Node},wugong_list:{default:null,type:cc.Prefab},wuqi:{type:cc.Label,default:null,displayName:"\u6b66\u5668",tooltip:"\u6b66\u5668\u6587\u672c\u6846"},wugong:{type:cc.Label,default:null,displayName:"\u6b66\u529f",tooltip:"\u6b66\u529f\u6587\u672c\u6846"},yifu:{type:cc.Label,default:null,displayName:"\u8863\u670d",tooltip:"\u8863\u670d\u6587\u672c\u6846"},xiezi:{type:cc.Label,default:null,displayName:"\u978b\u5b50",tooltip:"\u978b\u5b50\u6587\u672c\u6846"},yaodai:{type:cc.Label,default:null,displayName:"\u8170\u5e26",tooltip:"\u8170\u5e26\u6587\u672c\u6846"}},onLoad:function(){var t=this;this.label_wugong_list=cc.find("Canvas/main/node/list/view/content/label_wugong_list"),this.main=cc.find("Canvas/main"),this.wgs=this.label_wugong_list.children,this.node.on("select_wugong",function(e){var n=e.getUserData();cc.log("\u6dfb\u52a0\u6b66\u529f:"+n),t.wugong.string=n},this),this.node.on("select_wuqi",function(e){var n=e.getUserData();cc.log("\u6dfb\u52a0\u6b66\u529f:"+n),t.wuqi.string=n},this),this.node.on("select_yifu",function(e){var n=e.getUserData();cc.log("\u6dfb\u52a0\u6b66\u529f:"+n),t.yifu.string=n},this),this.node.on("select_xiezi",function(e){var n=e.getUserData();cc.log("\u6dfb\u52a0\u6b66\u529f:"+n),t.xiezi.string=n},this),this.node.on("select_yaodai",function(e){var n=e.getUserData();cc.log("\u6dfb\u52a0\u6b66\u529f:"+n),t.yaodai.string=n},this)},start:function(){this.wugongInit(),this.zhuangbeiInit()},wugongInit:function(){for(var t=0;t<i.JN.length;t++){if(t<this.wgs.length)this.wgs[t].getChildByName("name").getComponent(cc.Label).string=i.JN[t].name}},zhuangbeiInit:function(){var t=cc.find("Canvas/main/node/list/view/content/laebel_zhuangbei/wuqi/wg/name"),e=cc.find("Canvas/main/node/list/view/content/laebel_zhuangbei/yaodai/wg/name"),n=cc.find("Canvas/main/node/list/view/content/laebel_zhuangbei/yifu/wg/name"),c=cc.find("Canvas/main/node/list/view/content/laebel_zhuangbei/xiezi/wg/name"),o=t.getComponent(cc.Label),a=e.getComponent(cc.Label),s=c.getComponent(cc.Label),l=n.getComponent(cc.Label);null!=i.WUQI&&(o.string=i.WUQI.name),null!=i.YIFU&&(l.string=i.YIFU.name),null!=i.XIEZI&&(s.string=i.XIEZI.name),null!=i.YAODAI&&(a.string=i.YAODAI.name)},goShop:function(){this.jishi.active=!0},goMain:function(){this.main.active=!0,this.jishi.active=!1},addWQ:function(){Global.wugong_list.title="\u88c5\u5907",Global.wugong_list.zhuangbei.part="\u6b66\u5668",this.wugonglist=cc.instantiate(this.wugong_list),this.wugonglist.parent=this.node,this.wugonglist.setPosition(0,0),this.wugonglist.getComponent("wugong_list").jn=this.wuqi},addYD:function(){Global.wugong_list.title="\u88c5\u5907",Global.wugong_list.zhuangbei.part="\u8170\u5e26",this.wugonglist=cc.instantiate(this.wugong_list),this.wugonglist.parent=this.node,this.wugonglist.setPosition(0,0),this.wugonglist.getComponent("wugong_list").jn=this.yaodai},addXZ:function(){cc.log(Global.wugong_list.title),Global.wugong_list.title="\u88c5\u5907",Global.wugong_list.zhuangbei.part="\u978b\u5b50",this.wugonglist=cc.instantiate(this.wugong_list),this.wugonglist.parent=this.node,this.wugonglist.setPosition(0,0),this.wugonglist.getComponent("wugong_list").jn=this.xiezi},addYF:function(){Global.wugong_list.title="\u88c5\u5907",Global.wugong_list.zhuangbei.part="\u8863\u670d",this.wugonglist=cc.instantiate(this.wugong_list),this.wugonglist.parent=this.node,this.wugonglist.setPosition(0,0),this.wugonglist.getComponent("wugong_list").jn=this.yifu},addJN:function(){Global.wugong_list.title="\u6b66\u529f",this.wugonglist=cc.instantiate(this.wugong_list),this.wugonglist.parent=this.node,this.wugonglist.setPosition(0,0),this.wugonglist.getComponent("wugong_list").jn=this.wugong}}),cc._RF.pop()},{Player:"Player"}],meizhuang_map:[function(t,e,n){"use strict";cc._RF.push(e,"22ee9VG+2VM86d75n1W7+fH","meizhuang_map");cc.Enum({NONE:0,UP:1,DOWN:2,LEFT:3,RIGHT:4});cc.Class({extends:cc.Component,properties:{_playerPos:null},_getTilePos:function(t){var e=this.node.getContentSize(),n=this._tilemap.getTileSize(),i=Math.floor(t.x/n.width),c=Math.floor((e.height-t.y)/n.height)-1;return cc.v2(i,c)},onLoad:function(){var t=this;this.initPlayer(),this.initItem(),this.node.on(cc.Node.EventType.TOUCH_END,function(e){var n=t.node.convertToNodeSpaceAR(e.touch.getLocation()),i=n.x-t._player.x,c=n.y-t._player.y;if(cc.log("Xvalue"+i+"\nYvalue"+c),cc.log("\u524d"+t._player.x+","+t._player.y),Math.abs(i)>=Math.abs(c)&&Math.abs(i)>32?i>0?t._player.x+=32:t._player.x-=32:Math.abs(c)>=Math.abs(i)&&Math.abs(c)>32&&(c>0?t._player.y+=32:t._player.y-=32),cc.log("\u540e"+t._getTilePos(t._player)),t._layerBoss.getTileGIDAt(t._getTilePos(t._player))&&!Global.boss.dead&&(Global.player.x=t._player.x,Global.player.y=t._player.y,Global.player.saved=!0,Global.goScene("battle",!1)),t._layerBaoXiangClose.getTileGIDAt(t._getTilePos(t._player))&&!Global.baoxiang.opened&&(t.showMessage("\u7a7a\u7a7a\u5982\u4e5f~_~",1),t._layerBaoXiang.node.active=!0,t._layerBaoXiangClose.node.active=!1,Global.baoxiang.opened=!0),t._layerEnd.getTileGIDAt(t._getTilePos(t._player))){if(!Global.boss.dead)return void t.showMessage("\u8bf7\u5148\u6740\u4e86boss\u540e\u901a\u5173!",1);Global.player.saved=!1,Global.boss.dead=!1,Global.baoxiang.opened=!1,Global.goScene("main")}})},initPlayer:function(){var t=this.node.getContentSize();if(this._tilemap=cc.find("Canvas/map").getComponent(cc.TiledMap),this._player=cc.find("Canvas/map/player"),this._layerBoss=this._tilemap.getLayer("boss"),this._layerBaoXiang=this._tilemap.getLayer("open_baoxiang"),this._layerBaoXiangClose=this._tilemap.getLayer("close_baoxiang"),this._layerBossDead=this._tilemap.getLayer("boss_dead"),this._layerEnd=this._tilemap.getLayer("end"),this._layerBossDead.node.active=!1,this._layerBaoXiang.node.active=!1,cc.log(this._layerBoss),cc.log(this._layerBaoXiang),cc.log(this._layerBossDead),Global.player.saved)Global.boss.dead&&(this._layerBoss.node.active=!1,this._layerBossDead.node.active=!0),Global.baoxiang.opened&&(this._layerBaoXiangClose.node.active=!1,this._layerBaoXiang.node.active=!0),this._player.setPosition(Global.player.x,Global.player.y);else{var e=this._tilemap.getObjectGroup("players").getObject("player1");cc.log(e),this._player.setPosition(e.x,t.height-e.y),cc.log(this._player)}},initItem:function(){},start:function(){},showMessage:function(t,e){var n=new cc.Node;n.addComponent(cc.Label).string=t,n.width=400,n.height=400;var i=cc.find("Canvas");n.parent=i,n.setPosition(0,0),this.scheduleOnce(function(){n.destroy()},e)}}),cc._RF.pop()},{}],mjmap:[function(t,e,n){"use strict";cc._RF.push(e,"045b3S/n0FJO6Xht+UqCcFn","mjmap"),cc.Class({extends:cc.Component,properties:{},gobattle:function(t,e){Global.goScene("mjtiledmap",!1)},goback:function(t,e){Global.goScene("main")},start:function(){}}),cc._RF.pop()},{}],player1:[function(t,e,n){"use strict";cc._RF.push(e,"8280erEKDtJFKFWKyiEi9v2","player1");var i=t("Player");cc.Class({extends:cc.Component,properties:{HP:{default:null,type:cc.Label},HP_Pro:{default:null,type:cc.ProgressBar},Name:{default:null,type:cc.Label}},onLoad:function(){this.Name.string=i.Name},Attacked:function(){return cc.sequence(cc.moveBy(.25,20,0),cc.moveBy(.25,-20,0),cc.moveBy(.25,-20,0),cc.moveBy(.25,20,0))},ack:function(){var t=this;return new Promise(function(e,n){t.pugong(e)})},pugong:function(t){var e=this,n=(new XMLHttpRequest,cc.find("Canvas/player1"));this.player1=n;var c=cc.find("Canvas/enemy1"),o=cc.find("Canvas/dhk/scroll"),a=cc.find("Canvas/dhk/scroll/view/content/item"),s=cc.moveTo(.5,c.getPositionX()-100,c.getPositionY()),l=cc.moveTo(.5,n.getPosition()),r=o.getComponent(cc.ScrollView),g=a.getComponent(cc.Label),u=n.getComponent(cc.Animation),m=(this.liu.getComponent(cc.Animation),0),h=cc.sequence(cc.callFunc(function(){cc.log("\u5f00\u59cb\u653b\u51fb\u654c\u4eba")}),s,cc.callFunc(function(){u.getAnimationState("player_ack");e.liu.active=!1,u.play("player_ack")}),cc.callFunc(function(){m=Math.round((Math.random()+1)*(i.ack-enemy.def)),enemy.HP=enemy.HP-m>0?enemy.HP-m:0,g.string+=i.Name+"\u5bf9\u654c\u4eba\u9020\u6210\u4e86"+m+"\u70b9\u4f24\u5bb3\n",enemy.HP<=0&&e.enemy1Dead(),r.scrollToBottom(.1)}),cc.spawn(cc.callFunc(function(){e.enemyAttacked(),e.drop(m)}),cc.delayTime(1)),l);this.repeat=n.runAction(cc.sequence(cc.repeat(h,i.ackNum),cc.callFunc(function(){t()})))},start:function(){},update:function(t){this.HP.string=""+i.HP,this.HP_Pro.progress=(i.HP/i.MAXHP).toFixed(1)}}),cc._RF.pop()},{Player:"Player"}],shangcheng_item:[function(t,e,n){"use strict";cc._RF.push(e,"97da5x8N+dMMJgSf7JkQDju","shangcheng_item"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this.node.getChildByName("label");this.item_name=t.getComponent(cc.Label).string,cc.log(this.item_name)},start:function(){},selectItem:function(){cc.log(this.item_name);var t=new cc.Event.EventCustom("sh_select_item",!0);t.setUserData(this.item_name),this.node.dispatchEvent(t,this.item_name)}}),cc._RF.pop()},{}],titles:[function(t,e,n){"use strict";cc._RF.push(e,"d998cU+d3JE1oiMNHk5+9cd","titles"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="titles",t.handler="btnClick1",t.customEventData="click1 user data",this.node.getComponent(cc.Button).clickEvents.push(t)},btnClick1:function(t,e){var n=cc.find("Canvas/main/node"),i=cc.find("Canvas/main/dhk/scroll/view/content/item"),c=this.node.getChildByName("tabitem").getComponent(cc.Label),o=cc.find("Canvas/main/dhk/scroll");if(n){var a=i.getComponent(cc.Label),s=o.getComponent(cc.ScrollView);a.string+="\u70b9\u51fb\u4e86"+c.string+"\n",cc.log("\u70b9\u51fb\u4e86"+c.string);var l=new cc.Event.EventCustom("select-tab",!0);l.setUserData(c.string),this.node.dispatchEvent(l),s.scrollToBottom(.1)}},start:function(){}}),cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(t,e,n){"use strict";cc._RF.push(e,"0950fZc4UROVKvdeP3v+Ch3","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}],wg:[function(t,e,n){"use strict";cc._RF.push(e,"3ccf8OmzbRD24WcSPqta64F","wg");t("Player");cc.Class({extends:cc.Component,properties:{wugong_list:{type:cc.Prefab,default:null}},onLoad:function(){},start:function(){},addWQ:function(){Global.wugong_list.title="\u88c5\u5907",Global.wugong_list.zhuangbei.part="\u6b66\u5668";var t=this.wugonglist.getComponent("wugong_list"),e=this.node.getChildByName("name").getComponent(cc.Label);t.jn=e,this.wugonglist.active=!0},addYD:function(){Global.wugong_list.title="\u88c5\u5907",Global.wugong_list.zhuangbei.part="\u8170\u5e26";var t=this.wugonglist.getComponent("wugong_list"),e=this.node.getChildByName("name").getComponent(cc.Label);t.jn=e,this.wugonglist.active=!0},addXZ:function(){cc.log(Global.wugong_list.title),Global.wugong_list.title="\u88c5\u5907",Global.wugong_list.zhuangbei.part="\u978b\u5b50";var t=this.wugonglist.getComponent("wugong_list"),e=this.node.getChildByName("name").getComponent(cc.Label);t.jn=e,this.wugonglist.active=!0},addYF:function(){Global.wugong_list.title="\u88c5\u5907",Global.wugong_list.zhuangbei.part="\u62a4\u624b";var t=this.wugonglist.getComponent("wugong_list"),e=this.node.getChildByName("name").getComponent(cc.Label);t.jn=e,this.wugonglist.active=!0},addJN:function(){Global.wugong_list.title="\u6b66\u529f";var t=this.wugonglist.getComponent("wugong_list"),e=this.node.getChildByName("name").getComponent(cc.Label);t.jn=e,this.wugonglist.active=!0}}),cc._RF.pop()},{Player:"Player"}],wugong_list:[function(t,e,n){"use strict";cc._RF.push(e,"f8eb9h6LMFORIehETel6CQc","wugong_list");var i=t("Player");cc.Class({extends:cc.Component,properties:{row:"",title:"",item:"",jn:{default:null,type:cc.Label},Ntitle:{default:null,type:cc.Prefab},Nname:{default:null,type:cc.Prefab},Ntab:{default:null,type:cc.Node},Ncontent:{default:null,type:cc.Node},Nshuoming:{default:null,type:cc.Node}},onLoad:function(){var t=this;this.Ntab=cc.find("Canvas/wugong_list/tab"),this.Ncontent=cc.find("Canvas/wugong_list/name/view/content"),this.Nshuoming=cc.find("Canvas/wugong_list/shuoming"),this.node.on("select-tab",function(e){t.title=e.getUserData(),t.clearItems(),t.selectTitle(t.title)},this),this.node.on("select-item",function(e){t.item=e.getUserData(),t.selectItem(t.item)},this)},start:function(){var t=this,e=new Set;e.add(Global.wugong_list.title);var n=new Array;e.forEach(function(e){var i=cc.instantiate(t.Ntitle);i.getChildByName("tabitem").getComponent(cc.Label).string=e,n.push(e),t.Ntab.addChild(i)}),this.title=n[0],this.clearItems(),this.selectTitle(this.title)},clearItems:function(){this.Ncontent.children.forEach(function(t){t.destroy()})},deleteOldJN:function(){var t=!0,e=!1,n=void 0;try{for(var c,o=i.JN.keys()[Symbol.iterator]();!(t=(c=o.next()).done);t=!0){var a=c.value;if(cc.log("key:%s",a),cc.log("value:%",i.JN[a]),cc.log("oldvalue:%",this.jn.string),i.JN[a].name==this.jn.string){cc.log("\u8fdb\u6765\u5220\u9664\u4e86!%s",JSON.stringify(i.JN[a])),i.JN.splice(a,1);break}}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}cc.log("\u88c5\u5907\u6280\u80fd\u4e66:%s",JSON.stringify(i.JN))},selectTitle:function(t){var e=this;if("\u6b66\u529f"==this.title){var n=new Array;(o=(c=cc.instantiate(this.Nname)).getComponent(cc.Label)).string="<\u7a7a>",n.push(o.string),this.Ncontent.addChild(c),i.WUGONG.forEach(function(t){var c=!1;if(i.JN.forEach(function(e){e.name==t.name&&(c=!0)}),!c){var o=cc.instantiate(e.Nname),a=o.getComponent(cc.Label);a.string=t.name,n.push(a.string),e.Ncontent.addChild(o)}})}if("\u88c5\u5907"==this.title){var c,o,a=new Array;(o=(c=cc.instantiate(this.Nname)).getComponent(cc.Label)).string="<\u7a7a>",a.push(o.string),this.Ncontent.addChild(c),i.BeiBao.forEach(function(t){if(t.Part==Global.wugong_list.zhuangbei.part){e.row=t;var n=cc.instantiate(e.Nname),i=n.getComponent(cc.Label);i.string=t.name,a.push(i.string),e.Ncontent.addChild(n)}})}},selectItem:function(t){var e=this;if("<\u7a7a>"==t){var n=this.Nshuoming.getChildByName("title"),c=this.Nshuoming.getChildByName("num"),o=this.Nshuoming.getChildByName("body").getChildByName("details"),a=n.getComponent(cc.Label),s=o.getComponent(cc.Label),l=c.getComponent(cc.Label);return a.string="\u540d\u79f0",s.string="",l.string="",void(this.row=null)}i.WUGONG.forEach(function(n){if(n.name==t){var i=e.Nshuoming.getChildByName("title"),c=e.Nshuoming.getChildByName("num"),o=e.Nshuoming.getChildByName("body").getChildByName("details"),a=i.getComponent(cc.Label),s=o.getComponent(cc.Label),l=c.getComponent(cc.Label);a.string="\u540d\u79f0:"+n.name,s.string="\u54c1\u8d28:"+n.pingzhi+"\n",s.string+="=======================\n",s.string+=n.describe,l.string="\u6570\u91cf:"+n.num}}),i.BeiBao.forEach(function(n){if(n.name==t&&"\u88c5\u5907"==n.Type){if(e.row=n,"\u6b66\u5668"==n.Part){var i=e.Nshuoming.getChildByName("title"),c=e.Nshuoming.getChildByName("num"),o=e.Nshuoming.getChildByName("body").getChildByName("details"),a=i.getComponent(cc.Label),s=o.getComponent(cc.Label),l=c.getComponent(cc.Label);a.string="\u540d\u79f0:"+n.name,s.string="\u54c1\u8d28:"+n.pingzhi+"\n",s.string="\u653b\u51fb:"+n.ack+"\n",s.string+="=======================\n",s.string+=n.describe,l.string="\u6570\u91cf:"+n.num}if("\u8170\u5e26"==n.Part){var r=e.Nshuoming.getChildByName("title"),g=e.Nshuoming.getChildByName("num"),u=e.Nshuoming.getChildByName("body").getChildByName("details"),m=r.getComponent(cc.Label),h=u.getComponent(cc.Label),d=g.getComponent(cc.Label);m.string="\u540d\u79f0:"+n.name,h.string="\u54c1\u8d28:"+n.pingzhi+"\n",h.string="\u8840\u91cf:"+n.HP+"\n",h.string="\u9632\u5fa1:"+n.def+"\n",h.string+="=======================\n",h.string+=n.describe,d.string="\u6570\u91cf:"+n.num}if("\u978b\u5b50"==n.Part){var p=e.Nshuoming.getChildByName("title"),f=e.Nshuoming.getChildByName("num"),v=e.Nshuoming.getChildByName("body").getChildByName("details"),y=p.getComponent(cc.Label),C=v.getComponent(cc.Label),b=f.getComponent(cc.Label);y.string="\u540d\u79f0:"+n.name,C.string="\u54c1\u8d28:"+n.pingzhi+"\n",C.string="\u9632\u5fa1:"+n.def+"\n",C.string+="=======================\n",C.string+=n.describe,b.string="\u6570\u91cf:"+n.num}if("\u8863\u670d"==n.Part){var _=e.Nshuoming.getChildByName("title"),w=e.Nshuoming.getChildByName("num"),N=e.Nshuoming.getChildByName("body").getChildByName("details"),P=_.getComponent(cc.Label),B=N.getComponent(cc.Label),E=w.getComponent(cc.Label);P.string="\u540d\u79f0:"+n.name,B.string="\u54c1\u8d28:"+n.pingzhi+"\n",B.string="\u9632\u5fa1:"+n.def+"\n",B.string+="=======================\n",B.string+=n.describe,E.string="\u6570\u91cf:"+n.num}}})},addWG:function(){var t=this;if("\u6b66\u529f"==this.title){if(cc.log(this.item),this.deleteOldJN(),"<\u7a7a>"==this.item)return this.jn.string="+",void(this.node.active=!1);i.JN.forEach(function(e){e.name,t.item}),i.WUGONG.forEach(function(e){e.name==t.item&&i.JN.push(e)});var e=new cc.Event.EventCustom("select_wugong",!0);e.setUserData(this.item),this.node.dispatchEvent(e),this.node.destroy()}if("\u88c5\u5907"==this.title){if("\u6b66\u5668"==Global.wugong_list.zhuangbei.part){if("<\u7a7a>"==this.item)return this.jn.string="+",i.WUQI=null,void this.node.destroy();i.WUQI=this.row,cc.log("\u88c5\u5907\u4e86:"+JSON.stringify(i.WUQI)),this.addWQ()}if("\u8863\u670d"==Global.wugong_list.zhuangbei.part){if("<\u7a7a>"==this.item)return this.jn.string="+",i.YIFU=null,void this.node.destroy();i.YIFU=this.row,this.addYF()}if("\u8170\u5e26"==Global.wugong_list.zhuangbei.part){if("<\u7a7a>"==this.item)return this.jn.string="+",i.YAODAI=null,void this.node.destroy();i.YAODAI=this.row,this.addYD()}if("\u978b\u5b50"==Global.wugong_list.zhuangbei.part){if("<\u7a7a>"==this.item)return this.jn.string="+",i.XIEZI=null,void this.node.destroy();i.XIEZI=this.row,this.addXZ()}}},addWQ:function(){var t=new cc.Event.EventCustom("select_wuqi",!0);t.setUserData(this.item),this.node.dispatchEvent(t),this.node.destroy()},addYF:function(){var t=new cc.Event.EventCustom("select_yifu",!0);t.setUserData(this.item),this.node.dispatchEvent(t),this.node.destroy()},addYD:function(){var t=new cc.Event.EventCustom("select_yaodai",!0);t.setUserData(this.item),this.node.dispatchEvent(t),this.node.destroy()},addXZ:function(){var t=new cc.Event.EventCustom("select_xiezi",!0);t.setUserData(this.item),this.node.dispatchEvent(t),this.node.destroy()},cancel:function(){this.node.destroy()}}),cc._RF.pop()},{Player:"Player"}],wugong:[function(t,e,n){"use strict";cc._RF.push(e,"fc248uUCc1JMbFoHIPA2ZtP","wugong");var i=t("Player");cc.Class({extends:cc.Component,properties:{title:"",item:"",Ntitle:{default:null,type:cc.Prefab},Nname:{default:null,type:cc.Prefab},Ntab:{default:null,type:cc.Node},Ncontent:{default:null,type:cc.Node},Nshuoming:{default:null,type:cc.Node}},onLoad:function(){var t=this;this.Ntab=cc.find("Canvas/main/node/wugong/tab"),this.Ncontent=cc.find("Canvas/main/node/wugong/name/view/content"),this.Nshuoming=cc.find("Canvas/main/node/wugong/shuoming"),this.node.on("select-tab",function(e){t.title=e.getUserData(),t.clearItems(),t.selectTitle(t.title)},this),this.node.on("select-item",function(e){t.item=e.getUserData(),t.selectItem(t.item)},this)},start:function(){var t=this,e=new Set;e.add("\u6b66\u529f");var n=new Array;e.forEach(function(e){var i=cc.instantiate(t.Ntitle);i.getChildByName("tabitem").getComponent(cc.Label).string=e,n.push(e),t.Ntab.addChild(i)}),this.title=n[0],this.selectTitle(this.title)},clearItems:function(){this.Ncontent.children.forEach(function(t){t.destroy()})},selectTitle:function(t){var e=this,n=new Array;i.WUGONG.forEach(function(t){var i=cc.instantiate(e.Nname),c=i.getComponent(cc.Label);c.string=t.name,n.push(c.string),e.Ncontent.addChild(i)}),this.item=n[0],this.selectItem(this.item)},selectItem:function(t){var e=this;i.WUGONG.forEach(function(n){if(n.name===t){var i=e.Nshuoming.getChildByName("title"),c=e.Nshuoming.getChildByName("num"),o=e.Nshuoming.getChildByName("body").getChildByName("details"),a=i.getComponent(cc.Label),s=o.getComponent(cc.Label),l=c.getComponent(cc.Label);a.string="\u540d\u79f0:"+n.name,s.string="\u54c1\u8d28:"+n.pingzhi+"\n",s.string+="=======================\n",s.string+=n.describe,l.string="\u6570\u91cf:"+n.num}})},useItme:function(){var t=this;i.BeiBao.forEach(function(e){if(e.name===t.item){cc.log(e.num);var n=!0;if(i.WUGONG.forEach(function(t){e.name===t.name&&(cc.log("\u5df2\u7ecf\u5b66\u4f1a\u8be5\u6b66\u529f"),n=!1),cc.log(t.name)}),n){i.WUGONG.push(e);var c=t.Nshuoming.getChildByName("title"),o=t.Nshuoming.getChildByName("num"),a=t.Nshuoming.getChildByName("body").getChildByName("details"),s=c.getComponent(cc.Label),l=a.getComponent(cc.Label),r=o.getComponent(cc.Label);if(e.num>1)e.num=parseInt(e.num)-1,r.string="\u6570\u91cf:"+e.num;else cc.log("\u6570\u91cf\u662f1\u9500\u6bc1"),i.BeiBao.pop(e),s.string="\u540d\u79f0:",l.string="",r.string="\u6570\u91cf:",t.Ncontent.children.forEach(function(t){var n=t.getComponent(cc.Label);cc.log(n.string+"11"),cc.log(e.name+"12"),n.string==e.name&&(cc.log("destroy"),t.destroy())})}}})}}),cc._RF.pop()},{Player:"Player"}],xm:[function(t,e,n){"use strict";cc._RF.push(e,"2e2fcMt33VO7qR24Xl54tV+","xm");var i=t("Player");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=cc.find("Canvas/main/node/list/view/content/label_list/xm"),e=cc.find("Canvas/main/node/list/view/content/label_list/ack"),n=cc.find("Canvas/main/node/list/view/content/label_list/def"),i=cc.find("Canvas/main/node/list/view/content/label_list/hp"),c=cc.find("Canvas/main/node/list/view/content/label_list/mp"),o=cc.find("Canvas/main/node/list/view/content/label_list/exp"),a=cc.find("Canvas/main/node/list/view/content/label_list/jj"),s=cc.find("Canvas/main/node/list/view/content/label_list/jn"),l=cc.find("Canvas/main/node/list/view/content/label_list/money");this.name=t.getComponent(cc.Label),this.ack1=e.getComponent(cc.Label),this.def1=n.getComponent(cc.Label),this.hp1=i.getComponent(cc.Label),this.mp1=c.getComponent(cc.Label),this.exp1=o.getComponent(cc.Label),this.jj1=a.getComponent(cc.Label),this.jn1=s.getComponent(cc.Label),this.money1=l.getComponent(cc.Label)},start:function(){},updatePlayerStatus:function(){this.name.string="\u59d3\u540d:"+i.Name,this.ack1.string="\u653b\u51fb:"+i.ack,this.def1.string="\u9632\u5fa1:"+i.def,this.hp1.string="\u8840\u91cf:"+i.HP,this.mp1.string="\u5185\u529b:"+i.MP,this.exp1.string="\u4fee\u4e3a:"+i.EXP+"/"+i.MAXEXP,this.jj1.string="\u5883\u754c:"+i.LEVEL,this.money1.string="\u5143\u5b9d:"+i.money;var t="";i.WUGONG.forEach(function(e){t+=e.name+","}),this.jn1.string="\u6b66\u529f:"+t},update:function(t){this.updatePlayerStatus()}}),cc._RF.pop()},{Player:"Player"}]},{},["Enemy","Global","Person","Player","ShangCheng","WuGong","ZhuangBei","use_v2.1.x_cc.Action","appstart","beibao","btn_ack","btn_bb","btn_df","btn_mj","btn_rw","btn_wg","end","enemy1","hp","items","jishi","loading","login","main","meizhuang_map","mjmap","player1","shangcheng_item","titles","wg","wugong","wugong_list","xm"]);